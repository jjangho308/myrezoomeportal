{"version":3,"sources":["../../../src/routes/index.js"],"names":["express","require","router","Router","get","req","res","next","render","post","token","filterToken","console","log","body","cmd","userLogin","process","exception","certificate","send","module","exports"],"mappings":";;;AAGA,4C;AACA,2E;AACA,6E,uKALA;AACA,IAAIA,UAAUC,QAAQ,SAAR,CAAd,CACA,IAAIC,SAASF,QAAQG,MAAR,EAAb;AAKA;AACA;;AAEA;;AAEAD,OAAOE,GAAP,CAAW,QAAX,EAAqB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC7CD,MAAIE,MAAJ,CAAW,OAAX;AACD,CAFD;;AAIAN,OAAOE,GAAP,CAAW,OAAX,EAAoB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;;AAE7C,CAFD;;AAIAL,OAAOE,GAAP,CAAW,OAAX,EAAoB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC5CD,MAAIE,MAAJ,CAAW,MAAX;AACD,CAFD;;AAIA;AACAN,OAAOO,IAAP,CAAY,GAAZ,EAAiB,mBAASC,KAAT,GAAiBC,WAAlC,EAA+C,UAACN,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACjE;AACAK,UAAQC,GAAR,CAAYR,IAAIS,IAAhB;;AAEA,MAAIC,MAAMV,IAAIS,IAAJ,CAASC,GAAnB;;AAEA,MAAIA,QAAQ,OAAZ,EAAqB;AACnB,QAAIC,YAAY,kCAAhB;AACA,QAAI;AACFA,gBAAUC,OAAV,CAAkBZ,IAAIS,IAAtB,EAA4BR,GAA5B;AACD,KAFD,CAEE,OAAOY,SAAP,EAAkB;AAClBN,cAAQC,GAAR,CAAYK,SAAZ;AACD;AACF,GAPD,MAOO,IAAIH,QAAQ,MAAZ,EAAoB;;AAE1B,GAFM,MAEA,IAAIA,QAAQ,aAAZ,EAA2B;AAChC,QAAII,cAAc,mCAAlB;AACA,QAAI;AACFA,kBAAYF,OAAZ,CAAoBZ,IAAIS,IAAxB,EAA8BR,GAA9B;AACD,KAFD,CAEE,OAAOY,SAAP,EAAkB;AAClBN,cAAQC,GAAR,CAAYK,SAAZ;AACD;AACF,GAPM,MAOA;AACLZ,QAAIc,IAAJ,CAAS,GAAT;AACD;AACF,CAzBD;;AA2BA;AACAC,OAAOC,OAAP,GAAiBpB,MAAjB","file":"index.js","sourcesContent":["// import express from 'express'\r\nvar express = require('express');\r\nvar router = express.Router();\r\nimport managers from '../core/managers'\r\nimport UserLoginHandler from '../modules/request/user_login_handler';\r\nimport CertificateHandler from '../modules/request/certificate_handler';\r\n\r\n/* move other page */\r\n// router.get('/', function (req, res, next) {\r\n\r\n// });\r\n\r\nrouter.get('/login', function (req, res, next) {\r\n  res.render('login');\r\n});\r\n\r\nrouter.get('/join', function (req, res, next) {\r\n\r\n});\r\n\r\nrouter.get('/main', function (req, res, next) {\r\n  res.render('main');\r\n});\r\n\r\n/* router for above page logic */\r\nrouter.post('/', managers.token().filterToken, (req, res, next) => {\r\n  // router.post('/', (req, res, next) => {\r\n  console.log(req.body);\r\n\r\n  var cmd = req.body.cmd;\r\n\r\n  if (cmd === 'Login') {\r\n    var userLogin = new UserLoginHandler();\r\n    try {\r\n      userLogin.process(req.body, res);\r\n    } catch (exception) {\r\n      console.log(exception);\r\n    }\r\n  } else if (cmd === 'Join') {\r\n\r\n  } else if (cmd === 'Certificate') {\r\n    var certificate = new CertificateHandler();\r\n    try {\r\n      certificate.process(req.body, res);\r\n    } catch (exception) {\r\n      console.log(exception);\r\n    }\r\n  } else {\r\n    res.send(403);\r\n  }\r\n});\r\n\r\n// export default router;\r\nmodule.exports = router;"]}