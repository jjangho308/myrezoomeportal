{"version":3,"sources":["../../../src/routes/users.js"],"names":["express","require","router","Router","get","req","res","next","render","token","query","pdf","file","post","cmd","body","userLogin","process","exception","console","log","search","certificate","module","exports"],"mappings":";AACA,2E;AACA,iF;AACA,6E,sKAHA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AAIA,IAAIC,SAASF,QAAQG,MAAR,EAAb;;AAEA;AACAD,OAAOE,GAAP,CAAW,GAAX,EAAgB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACxCD,MAAIE,MAAJ,CAAW,OAAX;AACD,CAFD;;AAIAN,OAAOE,GAAP,CAAW,OAAX,EAAoB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC5CD,MAAIE,MAAJ,CAAW,MAAX,EAAmB,EAAEC,OAAOJ,IAAIK,KAAJ,CAAUD,KAAnB,EAAnB;AACA;AACD,CAHD;;AAKAP,OAAOE,GAAP,CAAW,MAAX,EAAmB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC3CD,MAAIE,MAAJ,CAAW,SAAX,EAAsB,EAAEG,KAAKN,IAAIK,KAAJ,CAAUE,IAAjB,EAAtB;AACA;AACD,CAHD;;AAKAV,OAAOW,IAAP,CAAY,GAAZ,EAAiB,UAAUR,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;;AAEzC;AACA;AACA;;AAEA,MAAIO,MAAMT,IAAIU,IAAJ,CAASD,GAAnB;;AAEA,MAAIA,OAAO,OAAX,EAAoB;AAClB,QAAIE,YAAY,kCAAhB;AACA,QAAI;AACFA,gBAAUC,OAAV,CAAkBZ,IAAIU,IAAtB,EAA4BT,GAA5B;AACD,KAFD,CAEE,OAAOY,SAAP,EAAkB;AAClBC,cAAQC,GAAR,CAAYF,SAAZ;AACD;AACF,GAPD,MAOO,IAAIJ,OAAO,QAAX,EAAqB;AAC1B,QAAIO,SAAS,qCAAb;AACA,QAAI;AACFA,aAAOJ,OAAP,CAAeZ,IAAIU,IAAnB,EAAyBT,GAAzB;AACD,KAFD,CAEE,OAAOY,SAAP,EAAkB;AAClBC,cAAQC,GAAR,CAAYF,SAAZ;AACD;AACF,GAPM,MAOA,IAAIJ,OAAO,aAAX,EAA0B;AAC/B,QAAIQ,cAAc,mCAAlB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAI;AACFA,kBAAYL,OAAZ,CAAoBZ,IAAIU,IAAxB,EAA8BT,GAA9B;AACD,KAFD,CAEE,OAAOY,SAAP,EAAkB;AAClBC,cAAQC,GAAR,CAAYF,SAAZ;AACD;AACF;;AAEF,CAxCD;;AA0CAK,OAAOC,OAAP,GAAiBtB,MAAjB","file":"users.js","sourcesContent":["var express = require('express');\r\nimport UserLoginHandler from '../modules/request/user_login_handler';\r\nimport SearchRequestHandler from '../modules/request/search_record_handler';\r\nimport CertificateHandler from '../modules/request/certificate_handler';\r\nvar router = express.Router();\r\n\r\n/* GET users listing. */\r\nrouter.get('/', function (req, res, next) {\r\n  res.render('login');\r\n});\r\n\r\nrouter.get('/main', function (req, res, next) {\r\n  res.render('main', { token: req.query.token });\r\n  //res.redirect('main');\r\n});\r\n\r\nrouter.get('/pdf', function (req, res, next) {\r\n  res.render('pdfview', { pdf: req.query.file });\r\n  //res.redirect('main');\r\n});\r\n\r\nrouter.post('/', function (req, res, next) {\r\n\r\n  // var clientReq = JSON.parse(req.body);\r\n  // var cmd = clientReq.cmd;\r\n  // console.log(clientReq);\r\n\r\n  var cmd = req.body.cmd;\r\n\r\n  if (cmd == 'Login') {\r\n    var userLogin = new UserLoginHandler();\r\n    try {\r\n      userLogin.process(req.body, res);\r\n    } catch (exception) {\r\n      console.log(exception);\r\n    }\r\n  } else if (cmd == 'Search') {\r\n    var search = new SearchRequestHandler();\r\n    try {\r\n      search.process(req.body, res);\r\n    } catch (exception) {\r\n      console.log(exception);\r\n    }\r\n  } else if (cmd == 'Certificate') {\r\n    var certificate = new CertificateHandler();\r\n\r\n    // var REZOOME_CERTIFICATE = {};\r\n    // REZOOME_CERTIFICATE.name = \"아무개\";\r\n    // REZOOME_CERTIFICATE.birthday = \"2000.01.01\";\r\n    // REZOOME_CERTIFICATE.grade = \"AL3\";\r\n    // REZOOME_CERTIFICATE.publish_date = \"2018년 01월 01일\";\r\n    // REZOOME_CERTIFICATE.orgname = \"오픽\";\r\n    // REZOOME_CERTIFICATE.hash = \"ssdfawefasdfv234r34trefwerfswerf\";\r\n\r\n    try {\r\n      certificate.process(req.body, res);\r\n    } catch (exception) {\r\n      console.log(exception);\r\n    }\r\n  }\r\n\r\n});\r\n\r\nmodule.exports = router;"]}