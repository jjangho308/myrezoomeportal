{"version":3,"sources":["../../../../src/modules/client/certificate_handler.js"],"names":["CertificateRequestHandler","opt","clientReq","clientRes","REZOOME_CERTIFICATE","db","getUserInfo","args","userid","res","console","log","name","NAME","birthday","BIRTH","grade","publish_date","orgname","hash","pdf","makePDF"],"mappings":"gnBAAA,gC;AACA,+C;AACA,kF;;AAEA;;;AAGMA,yB;AACF,uCAAYC,GAAZ,EAAiB;AACPA,WADO;AAEhB;;AAED;;;;;AAKQC,iB,EAAWC,S,EAAW;;AAE1B,gBAAIC,sBAAsB,EAA1B;;AAEA;AACA,+BAASC,EAAT,GAAcC,WAAd,CAA0BJ,UAAUK,IAAV,CAAeC,MAAzC,EAAiD,UAAUC,GAAV,EAAe;;AAE5DC,wBAAQC,GAAR,CAAYF,GAAZ;;AAEA;AACA,oBAAI,CAAC,CAACA,GAAN,EAAW;AACPL,wCAAoBQ,IAApB,GAA2BH,IAAI,CAAJ,EAAOI,IAAlC;AACAT,wCAAoBU,QAApB,GAA+BL,IAAI,CAAJ,EAAOM,KAAtC;AACAX,wCAAoBY,KAApB,GAA4B,KAA5B;AACAZ,wCAAoBa,YAApB,GAAmC,eAAnC;AACAb,wCAAoBc,OAApB,GAA8B,IAA9B;AACAd,wCAAoBe,IAApB,GAA2B,kCAA3B;;AAEA,uCAASC,GAAT,GAAeC,OAAf,mBAA4BjB,mBAA5B,EAAiDD,SAAjD;AACH;AACJ,aAfD;AAgBH,S;;;AAGUH,yB","file":"certificate_handler.js","sourcesContent":["import PDF from 'pdfkit';\r\nimport managers from '../../core/managers';\r\nimport AbstractClientRequestHandler from './abstract_clientrequest_handler';\r\n\r\n/**\r\n * 증명서 요청 핸들러.\r\n*/\r\nclass CertificateRequestHandler extends AbstractClientRequestHandler {\r\n    constructor(opt) {\r\n        super(opt);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CertificateRequest} clientReq \r\n     * @param {CertificateResponse} clientRes\r\n     */\r\n    process(clientReq, clientRes) {\r\n\r\n        var REZOOME_CERTIFICATE = {};\r\n\r\n        // 1. 사용자 정보를 DB에서 조회\r\n        managers.db().getUserInfo(clientReq.args.userid, function (res) {\r\n\r\n            console.log(res);\r\n\r\n            // 사용자 유저 존재\r\n            if (!!res) {\r\n                REZOOME_CERTIFICATE.name = res[0].NAME;\r\n                REZOOME_CERTIFICATE.birthday = res[0].BIRTH;\r\n                REZOOME_CERTIFICATE.grade = \"AL3\";\r\n                REZOOME_CERTIFICATE.publish_date = \"2018년 01월 01일\";\r\n                REZOOME_CERTIFICATE.orgname = \"오픽\";\r\n                REZOOME_CERTIFICATE.hash = \"ssdfawefasdfv234r34trefwerfswerf\";\r\n\r\n                managers.pdf().makePDF(PDF, REZOOME_CERTIFICATE, clientRes);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport default CertificateRequestHandler;\r\n\r\n"]}