{"version":3,"sources":["../../../../src/modules/pdf/pdf.js"],"names":["PDFkManager","opt","PDFDocument","lorem","res","toDataURL","JSON","stringify","error","qr_url","console","log","doc","size","pipe","createWriteStream","image","fit","align","valign","font","fontSize","text","name","underline","birthday","grade","publish_date","end","send","data","execption"],"mappings":"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","file":"pdf.js","sourcesContent":["import AbstractManager from \"../abstract_manager\";\r\nimport fs from 'fs';\r\nimport QRCode from 'qrcode';\r\n\r\n/**\r\n * PDFManager. <br />\r\n * \r\n * @since 180305\r\n */\r\nclass PDFkManager extends AbstractManager {\r\n    constructor(opt) {\r\n        super(opt);\r\n    }\r\n\r\n    init() {\r\n\r\n    }\r\n\r\n    makePDF(PDFDocument, lorem, res) {\r\n        QRCode.toDataURL(JSON.stringify(lorem), function (error, qr_url) {\r\n\r\n            if (error) {\r\n                console.log(error);\r\n            }\r\n\r\n            try {\r\n                var doc = new PDFDocument({\r\n                    size: 'A4',\r\n                    //layout: 'landscape' // default is portrait\r\n                });\r\n\r\n                // create file and http response\r\n                doc.pipe(fs.createWriteStream('public/certificate.pdf'));\r\n\r\n                // QR코드 입력\r\n                doc.image(qr_url, 490, 0, {\r\n                    fit: [100, 100],\r\n                    align: 'center',\r\n                    valign: 'center'\r\n                });\r\n\r\n                doc.font('public/fonts/test.ttf')\r\n                    .fontSize(35)\r\n                    .text(\"어학증명서\", 50, 120, {\r\n                        align: 'center'\r\n                    });\r\n\r\n                doc.fontSize(25)\r\n                    .text(\"이름       : \", 100, 250);\r\n\r\n                doc.fontSize(25)\r\n                    .text(lorem.name, 250, 250)\r\n                    .underline(250, 275, 100, 1);\r\n\r\n                doc.fontSize(25)\r\n                    .text(\"생년월일 : \", 100, 300);\r\n\r\n                doc.fontSize(25)\r\n                    .text(lorem.birthday, 250, 300)\r\n                    .underline(250, 325, 100, 1);\r\n\r\n                doc.fontSize(25)\r\n                    .text(\"점수       : \", 100, 350);\r\n\r\n                doc.fontSize(25)\r\n                    .text(lorem.grade, 250, 350)\r\n                    .underline(250, 375, 100, 1);\r\n\r\n                doc.fontSize(25)\r\n                    .text(\"발급일자  : \", 100, 400);\r\n\r\n                doc.fontSize(25)\r\n                    .text(lorem.publish_date, 250, 400)\r\n                    .underline(250, 425, 150, 1);\r\n\r\n                doc.fontSize(25)\r\n                    .text(\"위의 사실을 증명합니다.\", 50, 500, {\r\n                        align: 'center'\r\n                    });\r\n\r\n                doc.fontSize(20)\r\n                    .text(\"2018년 03월 08일\", 50, 600, {\r\n                        align: 'center'\r\n                    });\r\n\r\n                doc.fontSize(40)\r\n                    .text(\"레주메(주)\", 50, 700, {\r\n                        align: 'center'\r\n                    });\r\n\r\n                doc.image('public/images/dojang.png', 320, 680, {\r\n                    fit: [80, 80],\r\n                    align: 'center',\r\n                    valign: 'center'\r\n                });\r\n\r\n                // end and display the document in the iframe to the right\r\n                doc.end();     \r\n                //doc.pipe(res);    \r\n                \r\n                //res.render('pdfview', {pdf: 'certificate.pdf'});\r\n                //res.send(\"ok\")\r\n                \r\n                res.send({data: '/certificate.pdf'});\r\n            } catch (execption) {\r\n                console.log(execption);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport default PDFkManager;"]}