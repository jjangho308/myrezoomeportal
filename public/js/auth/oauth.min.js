var USER_STATUS_NONE=0,USER_STATUS_LITE=1,USER_STATUS_FULL=2,AJAX_URL="/oauth2";function issueToken(e){var t=e.code;$.ajax({url:AJAX_URL+"/token",type:"POST",data:{code:t,grant_type:"authorization_code",client_id:clientId,client_secret:clientSecret},success:function(e){window.opener.postMessage({refreshToken:e.refresh_token,accessToken:e.access_token},"*"),setTimeout(function(){window.close()},0)},failure:function(e){alert(e)}})}var userStatus=USER_STATUS_NONE;$(document).ready(function(){$("#btn_phone_check").click(function(e){switch(e.stopPropagation(),e.preventDefault(),userStatus){case USER_STATUS_NONE:var t=$("#input_phone").val();if(!t)return void alert("핸드폰 번호를 입력해 주세요.");$.ajax({url:AJAX_URL+"/phone",type:"GET",data:{phone:t},success:function(e){switch(userStatus=e.status,userPassword=e.pw,$("#div-phone").hide(),$("#div-pw").show(),userStatus){case USER_STATUS_LITE:case USER_STATUS_FULL:$(".pw-sub").html(e.name+" 님의 비밀번호")}},failure:function(e){alert(e)}})}}),$("#btn_signin").click(function(){var e=SHA256($("#signin_pw").val());$.ajax({url:AJAX_URL+"/signin",type:"POST",data:{phone:$("#input_phone").val(),client_id:clientId,client_secret:clientSecret,password:e},success:function(e){issueToken({code:e.code})},failue:function(e){alert(e)}})})});