function resumeredirect(e){console.log("######## certdirect ###########"),window.location.href="/resumes/"+e}function resumemore(e){$("#"+e).css("display","block"),window.event.stopPropagation()}function resumedelete(e){window.event.stopPropagation(),$.ajax({type:"DELETE",url:"/resumes/"+e,headers:{Authorization:client_authorization},success:function(e){console.log(e),loadresumelist()},error:function(e,o,s){console.error("Delete resume : "+s),console.error(e.responseText),loadresumelist()},contentType:"application/json"})}function loadresumelist(){console.log("============loadresumelist========"),$.ajax({type:"GET",url:"/resumes/list",headers:{Authorization:client_authorization},error:function(e,o,s){console.error("Load resumes error : "+s),console.error(e.responseText)},success:function(e){console.log("============certlistres========"),console.log(e);var o=e.result;for(var s in $(".resumes-container").remove(),$("#resumelistcount").text(o.length+"건"),o){var r='<div class="resumes-container" tabindex="1" onclick=resumeredirect("'+o[s].rsmId+'")>';r=r+'<p><img src="/img/resume-store/more.svg" alt="" class="more-store-resume" onclick=resumemore("more-div-'+o[s].rsmId+'") /></p>',r+='<img src="img/resume-store/invalid-name.png" alt="">',r=(r=(r=(r+="<p>이력서</p>")+"<p>"+o[s].title+"</p>")+"<p>업데이트 : "+o[s].modifiedDate+"</p>")+'<div id="more-div-'+o[s].rsmId+'" class="more-store-resume-div">',r=(r+="<p>복사</p>")+'<p onclick=resumedelete("'+o[s].rsmId+'")>삭제</p>',r+="<p>공유내역</p>",r+="</div>",r+="</div>",$("#resume-grid-div").append(r)}},contentType:"application/json"})}$(document).ready(function(){$(".modal tbody").mCustomScrollbar({theme:"minimal-dark"}),client_token=getCookie("JWT"),client_authorization="Bearer "+client_token,$("#header-myresume").css({border:"none","font-weight":"normal"}),$("#header-mycert").css({border:"none","font-weight":"normal"}),$("#header-resume-store").css({"border-bottom":"solid 5px #4c80f1","font-weight":"bold"}),$("#header-mycert").click(function(){window.location="certs"}),$("#header-resume-store").click(function(){window.location="resumes"}),$("#header-myresume").click(function(){window.location="main"}),$(".resumes-container").click(function(e){console.log($(e.target)),"more-store-resume"!=$(e.target).prop("class")&&"more-store-resume-p"!=$(e.target).prop("class")&&(window.location="/resumeseditor")}),$(document).on("click",".more-store-resume",function(){var e=$(this).closest(".resumes-container").find(".more-store-resume-div");"none"==e.css("display")?e.css("display","block"):e.css("display","none")}),loadresumelist(),$(".add-resumes").click(function(){console.log("이력서 생성 목록 클릭"),$("#add-resumes-dialog").modal("show");var a=getTxidList();$(".resumetr").remove(),$.ajax({type:"POST",url:"/certs/getmapping",headers:{Authorization:client_authorization},data:"",error:function(e,o,s){console.error("Load resumes error : "+s),console.error(e.responseText)},success:function(e){for(var o in console.log(e),a)try{var s=getData(a[o]).subid,r="",t="";for(var n in"RCCNF0001"==s||"RCGOC0002"==s||"RCCNF0003"==s||"RCGOC0004"==s||"RCCNF0001"==s||"RCCNF0001"==s?t="자격":"RCLPT0005"==s?t="어학":"RCOGC0008"!=s&&"RCOGC0009"!=s&&"RCOGC0010"!=s&&"RCOGC0011"!=s||(t="학력"),e)e[n].SUB_ID==s&&(r=e[n].SUB_NM);var c=a[o],i='<tr class="resumetr">';i+="<td>",i=(i=(i+='<div class="checkbox checkbox-primary">')+"<input id="+c+' type="checkbox" name="certcheck">')+"<label for="+c+"></label>",i+="</div>",i=(i=(i+="</td>")+"<td>"+t+"</td>")+"<td>"+r+"</td>",i+="</tr>",$("#add-resumes-dialog-table").append(i)}catch(e){console.log(e);continue}$("#add-cert-dialog").modal("show")},contentType:"application/json"})}),$(document).on("click",".more-store-resume",function(){var e=$(this).closest(".cert-container").find(".more-store-resume-div");"none"==e.css("display")?e.css("display","block"):e.css("display","none")}),$(".option-open").click(function(){var e=$(".sub-info-select-div");"none"==e.css("display")?e.css("display","block"):e.css("display","none"),e=$(".sub-info img:nth-child(2)"),console.log(e.attr("src")),0<=e.attr("src").indexOf("path-2")?(console.log("sadasd"),e.attr("src",e.attr("src").replace("path-2","path-1"))):0<=e.attr("src").indexOf("path-1")&&(console.log("sada2sd"),e.attr("src",e.attr("src").replace("path-1","path-2")))}),$(".sub-info-select-p").click(function(){$(".sub-info-select-p").removeClass("active"),$(this).addClass("active"),$(".sub-info-select-div").css("display","none"),$("p.option-open").text($(this).text())}),$(document).on("click","#add-resumes-dialog .confirm-btn",function(){$("#add-resumes-dialog  .close-modal").click();var e=0;$("#resumes-line-dialog #circle-"+e).css("background-color","#4a90e2");var o=setInterval(function(){$("#resumes-line-dialog #circle-"+e).css("background-color","#dadada"),5<(e+=1)&&(e=0,clearInterval(o)),$("#resumes-line-dialog #circle-"+e).css("background-color","#4a90e2")},1e3);setTimeout(function(){$("#resumes-line-dialog  .close-modal").click()},3e3);var t={data:[]};t.title="noname_"+getTimeStamp(),$('input:checkbox[name="certcheck"]').each(function(){if(this.checked){var e=this.id,o=sessionStorage.getItem(e),s=JSON.parse(o),r={};r.record=s,r.txid=e,t.data.push(r)}}),$.ajax({type:"POST",url:"/resumes",headers:{Authorization:client_authorization},data:JSON.stringify({resume:t}),error:function(e,o,s){console.error("Create resume : "+s),console.error(e.responseText)},success:function(e){console.log(e),setTimeout(function(){$("#resumes-line-dialog  .close-modal").click(),window.location="/resumes/editor/"+e.result.rsmId},2e3)},contentType:"application/json"})})});