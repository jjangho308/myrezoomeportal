{"code":"var reqparam=[];function certckeckboxclick(e){var o=sessionStorage.getItem(e),t=JSON.parse(o);reqparam.push(t.data),console.log(\"Cert REQ PARAM\"),console.log(reqparam)}function certredirect(e){console.log(\"######## certdirect ###########\"),window.location.href=\"/certs/\"+e}function certdelete(e){window.event.stopPropagation(),$.ajax({type:\"DELETE\",url:\"/certs/\"+e,headers:{Authorization:client_authorization},error:function(e,o,t){console.error(\"Delete cert : \"+t),console.error(e.responseText)},success:function(e){loadcertlist()},contentType:\"application/json\"})}function certmore(e){$(\"#\"+e).css(\"display\",\"block\"),window.event.stopPropagation()}function loadcertlist(){$.ajax({type:\"GET\",url:\"/certs/list\",headers:{Authorization:client_authorization},error:function(e,o,t){console.error(\"/certs/list \"+t),console.error(e.responseText)},success:function(e){console.log(e);var o=e.result;$(\".cert-container\").remove(),$(\"#certlistcount\").text(o.length+\"건\");var t=$(\"#cert-grid-div\");o.forEach(function(e){var o='<div class=\"cert-container\" tabindex=\"1\" onclick=certredirect(\"'+e.certId+'\")>';o=o+\"<p>\"+e.certId.substring(0,25)+'..<img style=\"z-index:999\" src=\"/img/resume-store/more.svg\" alt=\"\" class=\"more-store-resume\" onclick=certmore(\"more-div-'+e.certId+'\")></p>',o+='<img src=\"img/mycert/color_2.png\" alt=\"\">',o=(o=(o=(o+=\"<p>증명서</p>\")+\"<p>\"+e.title+\"</p>\")+\"<p>발급일시 : \"+formatDate(e.date)+\"</p>\")+'<div id=\"more-div-'+e.certId+'\" class=\"more-store-resume-div\">',o=(o+=\"<p>복사</p>\")+'<p onclick=certdelete(\"'+e.certId+'\")>삭제</p>',o+=\"<p>공유내역</p>\",o+=\"</div>\",o+=\"</div>\",t.append(o)})},contentType:\"application/json\"})}$(document).ready(function(){$(\".modal tbody\").mCustomScrollbar({theme:\"minimal-dark\"}),client_token=getCookie(\"JWT\"),client_authorization=\"Bearer \"+client_token,loadcertlist(),$(\"#header-myresume\").css({border:\"none\",\"font-weight\":\"normal\"}),$(\"#header-resume-store\").css({border:\"none\",\"font-weight\":\"normal\"}),$(\"#header-mycert\").css({\"border-bottom\":\"solid 5px #4c80f1\",\"font-weight\":\"bold\"}),$(\"#header-mycert\").click(function(){window.location=\"certs\"}),$(\"#header-resume-store\").click(function(){window.location=\"resumes\"}),$(\"#header-myresume\").click(function(){window.location=\"main\"}),$(\".cert-container\").click(function(e){console.log($(e.target)),\"more-store-resume\"!=$(e.target).prop(\"class\")&&\"more-store-resume-p\"!=$(e.target).prop(\"class\")&&(window.location=\"/certviewer\")}),console.log(\"=====Cert page=====\"),$(\".add-cert\").click(function(){console.log(\"증명서 발급 목록 클릭\"),$(\"#add-cert-dialog\").modal(\"show\");var a=getTxidList();$(\".certtr\").remove(),$.ajax({type:\"POST\",url:\"/certs/getmapping\",headers:{Authorization:client_authorization},data:\"\",error:function(e,o,t){console.error(\"Get mapping error : \"+t),console.error(e.responseText)},success:function(e){for(var o in console.log(e),a)try{var t=getData(a[o]).subid,r=\"\",c=\"\";for(var n in\"RCCNF0001\"==t||\"RCGOC0002\"==t||\"RCCNF0003\"==t||\"RCGOC0004\"==t||\"RCCNF0001\"==t||\"RCCNF0001\"==t?c=\"자격\":\"RCLPT0005\"==t?c=\"어학\":\"RCOGC0008\"!=t&&\"RCOGC0009\"!=t&&\"RCOGC0010\"!=t&&\"RCOGC0011\"!=t||(c=\"학력\"),e)e[n].SUB_ID==t&&(r=e[n].SUB_NM);var i=a[o],s='<tr class=\"certtr\">';s+=\"<td>\",s=(s=(s+='<div class=\"checkbox checkbox-primary\">')+\"<input id=\"+i+' type=\"checkbox\" name=\"certcheck\">')+\"<label for=\"+i+\"></label>\",s+=\"</div>\",s=(s=(s+=\"</td>\")+\"<td>\"+c+\"</td>\")+\"<td>\"+r+\"</td>\",s+=\"</tr>\",$(\"#add-cert-dialog-table\").append(s)}catch(e){console.log(e);continue}$(\"#add-cert-dialog\").modal(\"show\")},contentType:\"application/json\"})}),$(document).on(\"click\",\".more-store-resume\",function(){var e=$(this).closest(\".cert-container\").find(\".more-store-resume-div\");\"none\"==e.css(\"display\")?e.css(\"display\",\"block\"):e.css(\"display\",\"none\")}),$(\".option-open\").click(function(){var e=$(\".sub-info-select-div\");\"none\"==e.css(\"display\")?e.css(\"display\",\"block\"):e.css(\"display\",\"none\"),e=$(\".sub-info img:nth-child(2)\"),console.log(e.attr(\"src\")),0<=e.attr(\"src\").indexOf(\"path-2\")?(console.log(\"sadasd\"),e.attr(\"src\",e.attr(\"src\").replace(\"path-2\",\"path-1\"))):0<=e.attr(\"src\").indexOf(\"path-1\")&&(console.log(\"sada2sd\"),e.attr(\"src\",e.attr(\"src\").replace(\"path-1\",\"path-2\")))}),$(\".sub-info-select-p\").click(function(){$(\".sub-info-select-p\").removeClass(\"active\"),$(this).addClass(\"active\"),$(\".sub-info-select-div\").css(\"display\",\"none\"),$(\"p.option-open\").text($(this).text())}),$(\"#add-cert-dialog .confirm-btn\").click(function(){$(\"#add-cert-dialog  .close-modal\").click();var e=0;$(\"#cert-line-dialog #circle-\"+e).css(\"background-color\",\"#4a90e2\");var o=setInterval(function(){$(\"#cert-line-dialog #circle-\"+e).css(\"background-color\",\"#dadada\"),5<(e+=1)&&(e=0,clearInterval(o)),$(\"#cert-line-dialog #circle-\"+e).css(\"background-color\",\"#4a90e2\")},1e3);setTimeout(function(){$(\"#cert-line-dialog  .close-modal\").click(),$(\"#alarm-div span\").text('증명서 발급이 완료되었습니다.  \"증명서보관함\"에서 확인해주세요.'),$(\"#alarm-div\").css(\"display\",\"block\"),setTimeout(function(){$(\"#alarm-div\").hide()},1e3)},3e3),$('input:checkbox[name=\"certcheck\"]').each(function(){if(this.checked){var e=this.id,o=sessionStorage.getItem(e),t={};t.txid=e,t.record=JSON.parse(o),console.log(\"cert req param\"),console.log(t),$.ajax({type:\"POST\",url:\"/certs\",headers:{Authorization:client_authorization},data:JSON.stringify({cert:t}),error:function(e,o,t){console.error(\"Cert check error : \"+t),console.error(e.responseText)},success:function(e){console.log(e),loadcertlist()},contentType:\"application/json\"})}})})});"}