<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8">

    <title>Rezoome Index</title>
    <!-- <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint"> -->

    <!-- <link rel="stylesheet" href="css/styles.css?v=1.0"> -->

    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.slim.js"></script>

    <script type='text/javascript'>
        var socket = null;
        var endPoint = 'http://devportalalb-1075047289.ap-northeast-2.elb.amazonaws.com:3000'

        function connectIO() {
            console.log('connectIO');
            socket = io(endPoint);
            socket.on('SearchResult', function (msg) {
                alert(msg);
            })
        }

        function requestYSY() {
            $.ajax({
                type: 'POST',
                url: endPoint + '/client',
                headers: {
                    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7InVzZXJpZCI6InNlb255ZW9uIn0sImV4cCI6MTUyMTEzOTk1MCwiaWF0IjoxNTIxMDk2NzUwfQ.YFxcC_zN9wNNXVkXIl1KS87ZOdI2qqwPe7Jf8O7rwUI'
                },
                data: JSON.stringify({
                    cmd : 'Search',
                    args : {
                        pkey: 'asdfasdf'
                    }
                }),
                success: function (res) {
                    setSocket(res.mid);
                },
                contentType: 'application/json',
            })
        }

        function requestPHW() {
            $.ajax({
                type: 'POST',
                url: endPoint + '/client',
                headers: {
                    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7InVzZXJpZCI6Imhlb251ZyJ9LCJleHAiOjE1MjExMzk5NTAsImlhdCI6MTUyMTA5Njc1MH0.MFDsAwGfvlbpAcXZI4LtmhVjoDx1UVl-GaMsTwSOA-s'
                },
                data: {
                    cmd : 'Search',
                    args : {
                        pkey: 'asdfasdf'
                    }
                },
                success: function (res) {
                    setSocket(res.mid);
                },
                dataType: 'application/json',
            })
        }

        function requestSCH() {
            $.ajax({
                type: 'POST',
                url: endPoint + '/client',
                headers: {
                    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7InVzZXJpZCI6ImNoYW5nOHNoaW4ifSwiZXhwIjoxNTIxMTM5OTUwLCJpYXQiOjE1MjEwOTY3NTB9.ipLgRV2CL-kWc0D2ZgovK1-9xQiCEto6FDsISNORzuM'
                },
                data: {
                    cmd : 'Search',
                    args : {
                        pkey: 'asdfasdf'
                    }
                },
                success: function (res) {
                    setSocket(res.mid);
                },
                dataType: 'application/json',
            })
        }

        function setSocket(mid) {
            socket.emit('SetSocket', {
                mid: mid
            });
        }
    </script>
</head>

<body>
    <input type="button" onclick="connectIO()" value="Connect IO" />
    <input type="button" onclick="requestYSY()" value="유성연" />
    <input type="button" onclick="requestSCH()" value="신창호" />
    <input type="button" onclick="requestPHW()" value="박헌욱" />
</body>

</html>