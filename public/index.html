<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8">

    <title>Rezoome Index</title>
    <!-- <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint"> -->

    <!-- <link rel="stylesheet" href="css/styles.css?v=1.0"> -->

    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.slim.js"></script>

    <script type='text/javascript'>
        var socket = null;
        var endPoint = 'http://devportalalb-1075047289.ap-northeast-2.elb.amazonaws.com:3000'

        function connectIO() {
            console.log('connectIO');
            socket = io(endPoint);
            socket.on('SearchRecord', function (msg) {
                alert(msg);
            })
        }

        function requestYSY() {
            $.ajax({
                type: 'POST',
                url: endPoint + '/client',
                headers: {
                    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7InVzZXJpZCI6InN1bmd5ZW9uIn0sImV4cCI6MTUyMTA5NTQ0OSwiaWF0IjoxNTIxMDkxODQ5fQ.xdMXrQjJZyG7DmYonz4f9ZFIbeGCSeYT8FgROKFKsJA'
                },
                data: {
                    pkey: 'asdfasdf'
                },
                success: function (res) {
                    setSocket(res.mid);
                },
                dataType: 'application/json',
            })
        }

        function requestPHW() {
            $.ajax({
                type: 'POST',
                url: endPoint + '/client',
                headers: {
                    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7InVzZXJpZCI6Imhlb251ZyJ9LCJleHAiOjE1MjEwOTU4MjUsImlhdCI6MTUyMTA5MjIyNX0.xkxh3S058rIYrG5hnF6rptq65S5fhyW7lberYBeH98k'
                },
                data: {
                    pkey: 'asdfasdf'
                },
                success: function (res) {
                    setSocket(res.mid);
                },
                dataType: 'application/json',
            })
        }

        function requestSCH() {
            $.ajax({
                type: 'POST',
                url: endPoint + '/client',
                headers: {
                    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7InVzZXJpZCI6ImNoYW5nOHNoaW4ifSwiZXhwIjoxNTIxMDk1ODYwLCJpYXQiOjE1MjEwOTIyNjB9.caCpLks1lOmLmdF1CRizKXMKrEtoxiJmZ1idZDCmtk0'
                },
                data: {
                    pkey: 'asdfasdf'
                },
                success: function (res) {
                    setSocket(res.mid);
                },
                dataType: 'application/json',
            })
        }

        function setSocket(mid) {
            socket.emit('SetSocket', {
                mid: mid
            });
        }
    </script>
</head>

<body>
    <input type="button" onclick="connectIO()" value="Connect IO" />
    <input type="button" onclick="requestYSY()" value="유성연" />
    <input type="button" onclick="requestSCH()" value="신창호" />
    <input type="button" onclick="requestPHW()" value="박헌욱" />
</body>

</html>